<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://connect.facebook.net/en_US/sdk.js"></script>
        <script>
            FB.init({
                appId: "680621813586567",
                status: true,
                xfbml: true,
                version: "v2.7"
            });
        </script>
    </head>
    <body>
        <p>Authorization page</p>
        <script>
            FB.getLoginStatus(function(response) {
                if(response.error){
                    throw response.error.message;
                }
                if(response.status != "connected" || !response.authResponse){
                    console.log("[Login Status Check] Logging in");
                    FB.login(console.log, {
                        scope: "email,instagram_basic,instagram_content_publish,instagram_manage_comments,pages_show_list,public_profile,user_birthday,user_friends,user_gender,instagram_graph_user_media,instagram_graph_user_profile"
                    });
                    return;
                }
                localStorage.setItem("jango_token", response.authResponse.accessToken);
                console.log("[Login Status Check] Already logged in");
            })
        </script>
    </body>
</html>
